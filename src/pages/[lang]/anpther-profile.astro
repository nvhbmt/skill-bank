---
import DefaultLayout from '@/layouts/DefaultLayout.astro';
import Header from '@/components/Header.astro';
import '@/assets/css/personal-profile.css';
import { getStaticPaths, useTranslate } from '@/i18n';
export { getStaticPaths };

const { lang, t, l } = useTranslate(Astro);

// Mock Data User
const userProfile = {
    name: 'Bùi Thái Vy',
    username: '@tzecute',
    avatar: '/assets/images/avatar-default-icon.png',
    phone: '0396409722',
    email: 'buithaivy2019@gmail.com',
    education: ['Đại học CNTT', 'Web design'],
    experience: ['1 năm kinh nghiệm tự học', 'Học IT năm 2 tại UIT'],
    achievements: ['Website bán sách', 'Phân loại ảnh AI'],
    certificates: ['TOEIC 600+', 'MOS Excel'],
    banner: 'https://images.unsplash.com/photo-1506744038136-46273834b3fb?q=80&w=1600&auto=format&fit=crop',
    description:
        'Lorem ipsum dolor sit amet consectetur. Orci in sit pellentesque quis condimentum quis lacus. Ullamcorper augue velit augue arcu elementum quis. Tellus vestibulum diam natoque nam amet erat. Sagittis id consectetur orci mattis amet.',
    skills: [
        'React',
        'SQL',
        'C++',
        'Thiết kế trải nghiệm người dùng',
        'JavaScript',
        'Figma',
        'HTML',
        'CSS',
        'Java',
        'API',
    ],
};

// Mock Data Reviews (Thêm nhiều để test slider)
const reviews = [
    {
        id: 1,
        name: 'Ly Huy',
        username: '@lyhuy2201',
        avatar: '/assets/images/avatar-default-icon.png',
        rating: 5,
        text: 'Rất uy tín và linh hoạt. Làm việc chuyên nghiệp!',
    },
    {
        id: 2,
        name: 'Nguyễn Văn A',
        username: '@nguyenvana',
        avatar: '/assets/images/avatar-default-icon.png',
        rating: 5,
        text: 'Giao diện đẹp, code sạch sẽ. Sẽ hợp tác lần sau.',
    },
    {
        id: 3,
        name: 'Trần Thị B',
        username: '@tranthib',
        avatar: '/assets/images/avatar-default-icon.png',
        rating: 4,
        text: 'Hoàn thành đúng hạn, support nhiệt tình.',
    },
    {
        id: 4,
        name: 'Lê Văn C',
        username: '@levanc',
        avatar: '/assets/images/avatar-default-icon.png',
        rating: 5,
        text: 'Kỹ năng ReactJS rất tốt, giải quyết vấn đề nhanh.',
    },
    {
        id: 5,
        name: 'Phạm D',
        username: '@phamd',
        avatar: '/assets/images/avatar-default-icon.png',
        rating: 5,
        text: 'Rất hài lòng với sản phẩm.',
    },
];
---

<DefaultLayout>
    <div class="wrapper">
        <Header />

        <main>
            <div class="profile-container">
                <!-- === CỘT TRÁI: SIDEBAR === -->
                <div class="left-sidebar">
                    <!-- 1. User Card -->
                    <div class="sidebar-card user-card">
                        <div class="user-avatar-wrapper">
                            <img
                                src={userProfile.avatar}
                                alt="Avatar"
                                class="user-avatar"
                            />
                        </div>
                        <div class="user-info">
                            <h3>{userProfile.name}</h3>
                            <span>{userProfile.username}</span>
                        </div>
                    </div>

                    <!-- 2. Thông tin chung -->
                    <div class="sidebar-card section-card">
                        <h4>{t('profile.thongTinChung')}</h4>
                        <div class="info-list">
                            <div class="info-item">
                                <span class="info-label"
                                    >{t('profile.soDienThoai')}:</span
                                >
                                <span class="info-value"
                                    >{userProfile.phone}</span
                                >
                            </div>
                            <div class="info-item">
                                <span class="info-label"
                                    >{t('profile.email')}:</span
                                >
                                <span class="info-value"
                                    >{userProfile.email}</span
                                >
                            </div>
                        </div>
                    </div>

                    <!-- 3. Thông tin thêm -->
                    <div class="sidebar-card section-card">
                        <h4>{t('profile.thongTinThem')}</h4>
                        <div class="info-list">
                            <div class="info-item">
                                <span class="info-label"
                                    >{t('profile.linhVucQuanTam')}:</span
                                >
                                <ul class="bullet-list">
                                    {
                                        userProfile.education.map((item) => (
                                            <li>{item}</li>
                                        ))
                                    }
                                </ul>
                            </div>
                            <div class="info-item" style="margin-top: 1rem;">
                                <span class="info-label"
                                    >{t('profile.kinhNghiem')}:</span
                                >
                                <ul class="bullet-list">
                                    {
                                        userProfile.experience.map((item) => (
                                            <li>{item}</li>
                                        ))
                                    }
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- 4. Thành tựu -->
                    <div class="sidebar-card section-card">
                        <h4>{t('profile.thanhTuu')}</h4>
                        <div class="info-list">
                            <div class="info-item">
                                <span class="info-label"
                                    >{t('profile.duAnTungLam')}:</span
                                >
                                <ul class="bullet-list">
                                    {
                                        userProfile.achievements.map((item) => (
                                            <li>{item}</li>
                                        ))
                                    }
                                </ul>
                            </div>
                            <div class="info-item" style="margin-top: 1rem;">
                                <span class="info-label"
                                    >{t('profile.chungChi')}:</span
                                >
                                <ul class="bullet-list">
                                    {
                                        userProfile.certificates.map((item) => (
                                            <li>{item}</li>
                                        ))
                                    }
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- === CỘT PHẢI: CONTENT CHÍNH === -->
                <div class="right-content">
                    <!-- 1. Banner -->
                    <div class="banner-section">
                        <img
                            src={userProfile.banner}
                            alt="Cover"
                            class="banner-image"
                        />
                        <div class="banner-overlay">
                            <button class="btn-banner btn-share">
                                <i class="fa-solid fa-share-nodes"></i>
                                {t('profile.chiaSe')}
                            </button>
                        </div>
                    </div>

                    <!-- 2. Mô tả -->
                    <div class="content-block">
                        <h3 class="content-title">{t('profile.moTa')} :</h3>
                        <p class="description-text">
                            {userProfile.description}
                        </p>
                    </div>

                    <!-- 3. Kỹ năng -->
                    <div class="content-block">
                        <h3 class="content-title">{t('profile.kiNang')} :</h3>
                        <div class="skills-wrapper">
                            {
                                userProfile.skills.map((skill) => (
                                    <span class="skill-tag">{skill}</span>
                                ))
                            }
                        </div>
                    </div>

                    <!-- 4. Dự án (Grid Card) -->
                    <div class="content-block">
                        <h3 class="content-title">{t('profile.duAn')} :</h3>
                        <div class="projects-row">
                            <!-- Project 1 -->
                            <a href="#" class="project-card-new">
                                <div class="project-thumb-wrapper">
                                    <img
                                        src="/assets/images/avatar-default-icon.png"
                                        alt="Design web"
                                        class="project-thumb-new"
                                    />
                                </div>
                                <div class="project-info-new">
                                    <div class="project-header-row">
                                        <span class="project-title-new"
                                            >Design web</span
                                        >
                                        <span class="project-tag-badge"
                                            >UI/UX</span
                                        >
                                    </div>
                                    <span class="project-email"
                                        >buithaivy2019@gmail.com</span
                                    >
                                    <div class="project-stats-row">
                                        <div class="stat-icon">
                                            <i class="fa-regular fa-thumbs-up"
                                            ></i>
                                            <span>399</span>
                                        </div>
                                        <div class="stat-icon">
                                            <i class="fa-regular fa-thumbs-down"
                                            ></i>
                                        </div>
                                    </div>
                                </div>
                            </a>
                            <!-- Project 2 -->
                            <a href="#" class="project-card-new">
                                <div class="project-thumb-wrapper">
                                    <img
                                        src="/assets/images/avatar-default-icon.png"
                                        alt="Design web"
                                        class="project-thumb-new"
                                    />
                                </div>
                                <div class="project-info-new">
                                    <div class="project-header-row">
                                        <span class="project-title-new"
                                            >Design web</span
                                        >
                                        <span class="project-tag-badge"
                                            >UI/UX</span
                                        >
                                    </div>
                                    <span class="project-email"
                                        >buithaivy2019@gmail.com</span
                                    >
                                    <div class="project-stats-row">
                                        <div class="stat-icon">
                                            <i class="fa-regular fa-thumbs-up"
                                            ></i>
                                            <span>311</span>
                                        </div>
                                        <div class="stat-icon">
                                            <i class="fa-regular fa-thumbs-down"
                                            ></i>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>

                    <!-- 5. Đánh giá (Carousel Tự động + Swipe) -->
                    <div class="content-block">
                        <h3 class="content-title">{t('profile.danhGia')}:</h3>

                        <div class="reviews-container" id="reviews-container">
                            <div class="reviews-viewport">
                                <div class="reviews-track" id="reviews-track">
                                    {
                                        reviews.map((review, index) => (
                                            <div
                                                class={`review-slide ${index === 0 ? 'active' : ''}`}
                                            >
                                                <div class="review-card-featured">
                                                    <img
                                                        src={review.avatar}
                                                        alt={review.name}
                                                        class="reviewer-avatar"
                                                    />
                                                    <div class="review-stars">
                                                        {Array(review.rating)
                                                            .fill('★')
                                                            .join('')}
                                                    </div>
                                                    <p class="review-text">
                                                        "{review.text}"
                                                    </p>
                                                    <div class="reviewer-info">
                                                        <h5>{review.name}</h5>
                                                        <span>
                                                            {review.username}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        ))
                                    }
                                </div>
                            </div>

                            <!-- Dots Navigation -->
                            <div class="review-dots" id="review-dots">
                                {
                                    reviews.map((_, index) => (
                                        <span
                                            class={`dot ${index === 0 ? 'active' : ''}`}
                                            data-index={index}
                                        />
                                    ))
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Import Script -->
    <script src="@/assets/script/personal-profile.js"></script>
</DefaultLayout>
